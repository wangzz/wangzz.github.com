---
title: 腾讯云服务器自建博客
date: 2021-02-28 23:29:58
tags: [Centos, hexo, nginx]
---

## 简介

hexo 博客系统会将 md 文件转换成可以在浏览器里访问的 html 文件，如果将转换后的文件放在云服务器上，起一个 nginx 服务即可达自建博客的目的，从此告别龟速的 GitHub pages。

## 环境

本地：macOS Mojave 10.14.6

云服务器：腾讯云 Centos8

## 准备好 hexo 编译后文件

将 hexo 编译后的文件手动拷贝到云服务器的特定目录下，我的存放位置是：

```
su root
mkdir /home/hexo    # 此目录为网站的根目录
```

## 配置 nginx 服务

* 安装

因此第一步是安装 nginx，我用的是腾讯云的 Centos8，安装比较简单：

```shell
yum install nginx
```

<!-- more -->

* 修改配置

nginx 默认配置文件目录为：`/etc/nginx/conf/nginx.conf`，找到这个文件后修改下面的几个配置：

```shell
server {
         listen       80;             #监听80端口
         server_name www.foogry.wang;  #你的服务器名，通常是域名，如果是域名，你就需要监听80端口
         root       /home/hexo;       #网站的根目录，也就是你 hexo 编译后的文件存放位置
         location / {
         }
}
```

* 启动服务

```
systemctl restart nginx.service
```

或者 

```
nginx -s reload
```

* 预览效果

这时顺利的话，在浏览器里输入 你前面配置的 `server_name` 或者你的云服务器公网 ip 地址就能看到网站了。

## 自动部署

如何自动部署？

## 问题

* git push 到远程仓库后报错：

```
Enumerating objects: 172, done.
Counting objects: 100% (172/172), done.
Delta compression using up to 4 threads
Compressing objects: 100% (166/166), done.
error: remote unpack failed: unable to create temporary object directory
error: failed to push some refs to 'git@81.70.132.212:/home/git/hexo.git'
```

解决方案：

远程服务器下给 `/home/hexo.git` 开启写权限：
```
su root
chown git:git -R hexo.git
```

## 参考文档

* [hexo部署云服务器的全过程](https://blog.csdn.net/weixin_41154636/article/details/99685965)
* [云服务器部署hexo博客](https://blog.csdn.net/lxhhh_h/article/details/109385484)
* [CentOS搭建Git服务器及权限管理](https://www.jianshu.com/p/a0eb79fa5b8d)